(function(){var t,p;(function(){function a(i){var j=d[i];if(j)return j;if(!g[i])throw new Error("Module "+i+" not found");for(var e=g[i],h=e.deps||(e.length?["require","exports","module"]:[]),k=d[i]={},o=0;o<h.length;o++){var b=h[o];switch(b){case "require":b=function(l){if(l.charAt(0)==="."){for(l=i.substring(0,i.lastIndexOf("/")+1)+l;q!==l;){var q=l;l=l.replace(/\/[^\/]*\/\.\.\//,"/")}l=l.replace(/\/\.\//g,"/")}return a(l)};break;case "exports":b=k;break;case "module":j=b={exports:k};break;default:b=
a(b)}h[o]=b}k=e.apply(this,h);if(j&&j.exports!=d[i])k=j.exports;if(k)return d[i]=k;return d[i]}var g={},d={};t=function(i,j){for(var e=[],h=0;h<i.length;h++)e.push(a(i[h]));j.apply(a,e)};p=t.def=function(i,j,e){if(typeof j=="function")g[i]=j;else(g[i]=e).deps=j}})();p("lingwo_dictionary/util/extendPrototype",[],function(){return function(a,g){for(var d in g)a.prototype[d]=g[d]}});p("lingwo_dictionary/util/declare",["lingwo_dictionary/util/extendPrototype"],function(a){return function(g){var d=g._constructor;
delete g._constructor;a(d,g);return d}});p("lingwo_dictionary/layout/Popup",["jquery","lingwo_dictionary/util/declare"],function(a,g){return g({_constructor:function(d){this.popup=d.node},shutdown:function(){},layout:function(d){d=a(d);var i=a(this.popup),j=i.width(),e=d.offset(),h=e.left+d.width()/2-j/2;d=e.top+d.height()+40;e=a(document).width();if(h+j>e)h=e-j;if(h<0)h=0;i.show().css({left:h,top:d})}})});p("lingwo_dictionary/util/clobber",[],function(){return function(a,g,d){old_fn=a[g];a[g]=function(){old_fn.apply(this,
arguments);d()}}});p("lingwo_dictionary/util/clone",[],function(){return function(a){var g={},d;for(d in a)g[d]=a[d];return g}});p("lingwo_dictionary/util/proxy",[],function(){return function(a,g){return function(){return a.apply(g,arguments)}}});t.def("lingwo_dictionary/annotation/Reader2",["jquery","lingwo_dictionary/layout/Popup","lingwo_dictionary/util/clobber","lingwo_dictionary/util/clone","lingwo_dictionary/util/proxy"],function(a,g,d,i,j){var e,h,k=/MSIE 6/i.test(navigator.userAgent),o={layout:"docked"};
h={popup:{setup:function(){e.bubbleNode.addClass("popup");this._layout=new g({node:e.bubbleNode})},shutdown:function(){e.bubbleNode.removeClass("popup");this._layout.shutdown()},show:function(){var b=e.bubbleNode;this._layout.layout(e.selectedNode);b.css("height","");if(k||b.height()>200)b.css({height:200})},hide:function(){e.bubbleNode.hide()}},docked:{_dock:null,_footer:null,_footerId:null,_footerMargin:null,_positionBubble:function(){e.bubbleNode.show();var b=e.bubbleNode,l=this._dock.offset(),
q=this._footer.offset().top;b.outerWidth();b.innerWidth();var v=b.outerHeight()-b.innerHeight(),s=Math.max(l.top-a(window).scrollTop()+1,0);q=Math.min(q-a(window).scrollTop()-s-this._footerMargin+1,a(window).height()-s)-v;b.css({left:l.left-a(window).scrollLeft(),top:s,height:q})},_drupalHack:false,setup:function(){e.bubbleNode.addClass("docked");this._dock=a("#lingwo-korpus-dock");this._footerId=this._dock.attr("data-footer-id");this._footerMargin=this._dock.attr("data-footer-margin");this._footer=
a("#"+this._footerId);var b=j(this._positionBubble,this);a(window).bind("scroll.lingwoReaderDocked",b);a(window).bind("resize.lingwoReaderDocked",b);if(!this._drupalHack){typeof window.Drupal!="undefined"&&Drupal.adminToolbar&&d(Drupal.adminToolbar,"setState",function(){if(e.layout===h.docked){e.bubbleNode.hide();setTimeout(b,500)}});this._drupalHack=true}e.setBubbleContent("<em>Click a work in the text to look it up in the dictionary.</em>");setTimeout(b,0)},shutdown:function(){e.bubbleNode.removeClass("docked");
this._dock=this._footerId=this._footerMargin=this._footer=null;a(window).unbind(".lingwoReaderDocked")},show:function(){},hide:function(){}}};return e={defaultLayouts:h,onLoad:function(){},config:null,bubbleNode:null,contentNode:null,selectedNode:null,shown:false,isSetup:false,layout:null,setup:function(b){if(typeof b=="undefined")b=i(o);this.config=b;if(this.config.layout=="docked"&&k)this.config.layout="popup";if(this.isSetup){this.layout.shutdown();this.layout=null;this.isSetup=false}if(!this.bubbleNode)this.bubbleNode=
a("<div></div>").attr("id","lingwo-korpus-entry-view-wrapper").appendTo(a("body")).hide();if(!this.contentNode)this.contentNode=a("<div></div>").attr("id","lingwo-korpus-entry-view").appendTo(this.bubbleNode);b=typeof this.config.layout=="string"?h[this.config.layout]:this.config.layout;b.setup();this.config.skipHoverEvents||this.setupHoverEvents();this.layout=b;this.isSetup=false},setupHoverEvents:function(){a(".anno, .anno-anchor").unbind("mouseenter mouseleave").bind("mouseenter",function(b){b=
a(b.target);b.addClass("hover");if(b=e._getAnnoText(b))b.addClass("hover")}).bind("mouseleave",function(b){b=a(b.target);b.removeClass("hover");if(b=e._getAnnoText(b))b.removeClass("hover")})},_getAnnoText:function(b){if(b.hasClass("anno-anchor"))if(b=b.attr("data-anno"))return a("#"+b);return null},setSelection:function(b){var l;if(this.selectedNode){this.selectedNode.removeClass("selected");if(l=this._getAnnoText(this.selectedNode))l.removeClass("selected");this.selectedNode=null}if(b){b=a(b);b.addClass("selected");
this.selectedNode=b;if(l=this._getAnnoText(this.selectedNode))l.addClass("selected")}},clearSelection:function(){this.setSelection(null)},isInsideBubble:function(b){for(;b=b.parentNode;)if(b.id=="lingwo-korpus-entry-view")return true;return false},showBubble:function(){this.layout.show();this.shown=true},hideBubble:function(){this.layout.hide();this.shown=false},setBubbleContent:function(b){this.contentNode.html(b)},setBubbleLoading:function(){this.setBubbleContent("Loading...")},isWordNode:function(b){return a(b).hasClass("anno")||
a(b).hasClass("anno-anchor")},handleClick:function(b){if(this.isWordNode(b)){if(this.isInsideBubble(b))this.onLoad(a(b));else{this.setSelection(b);this.onLoad(this.selectedNode);this.showBubble()}return false}this.clearSelection();this.hideBubble()}}});p("lingwo_dictionary/layout/isPositionFixedSupported",[],function(){function a(){var g=null;if(document.createElement){var d=document.createElement("div");if(d&&d.style){d.style.position="fixed";d.style.top="10px";var i=document.body;if(i&&i.appendChild&&
i.removeChild){i.appendChild(d);g=d.offsetTop===10;i.removeChild(d)}}}return g}return function(){var g=navigator.userAgent.toLowerCase();return a()&&!/iphone|ipod|android/.exec(g)}});p("lingwo_dictionary/layout/BottomDock",["jquery","lingwo_dictionary/util/declare","lingwo_dictionary/util/proxy","lingwo_dictionary/layout/isPositionFixedSupported"],function(a,g,d,i){var j=i();return g({_constructor:function(e){this.node=e.node;this.size=e.size;this.spacerNode=a("<div></div>").appendTo(a("body")).css("height",
this.size).get(0);a(this.node).css({position:j?"fixed":"absolute",overflow:"hidden"}).appendTo(a("body"));this._layoutProxy=d(this.layout,this);a(window).bind("resize",this._layoutProxy);j||a(window).bind("scroll",this._layoutProxy)},shutdown:function(){a(window).unbind("resize",this._layoutProxy);j||a(window).unbind("scroll",this._layoutProxy);a(this.node).remove();a(this.spacer).remove()},onlayout:function(){},layout:function(){var e=Math.min(a(window).width(),a(document).width()),h=a(window).height(),
k=a(document).height();h=h-this.size;var o=0;if(!j){h+=a(window).scrollTop();o+=a(window).scrollLeft()}if(h+this.size>k)h=k-this.size;a(this.spacerNode).css("height",this.size);a(this.node).css({top:h,left:o,width:e,height:this.size});this.onlayout(h,o,e,this.size)}})});p("bibliobird/Embed",["jquery","lingwo_dictionary/util/declare","lingwo_dictionary/annotation/Reader2","lingwo_dictionary/layout/BottomDock","lingwo_dictionary/layout/isPositionFixedSupported"],function(a,g,d,i,j){function e(c){var f=
v[b.lang][c];return f?f:c}function h(c,f,m){var n;for(n in f)if(!m||typeof c[n]=="undefined")c[n]=f[n]}function k(c,f){f=typeof f=="undefined"?b.lang:f;f=b.url.replace("<lang>",f);if(c)return f+"/"+c;return f}function o(c){this.node=c;this.url=a(c).attr("data-url")||b.getPageUrl();this.teaser=a(c).attr("data-teaser")=="true";this.links=a('<div class="bibliobird-links"></div>').insertBefore(c);this.data={};this.lookupContent()}var b={},l={url:"http://<lang>.bibliobird.com",lang:"en",showLinks:true,
oninit:function(){},onlogin:function(){},onlogout:function(){},onlookup:function(){},pageUrlRemove:"#",getPageUrl:function(){var c=""+window.self.location.href;switch(b.pageUrlRemove){case "?":c=c.split("?")[0];case "#":c=c.split("#")[0]}return c}},q={en:"English",pl:"Polski"},v={en:{}},s=j(),w;v.pl={"Translate to":"T\u0142umacz na","Words I Am Learning":"M\u00f3j osobisty s\u0142owniczek",Hello:"Cze\u015b\u0107",Login:"Zaloguj si\u0119",or:"lub",register:"utw\u00f3rz konto","on BiblioBird":"w systemie BiblioBird",
"not me!":"to nie ja!"};w=g({_constructor:function(){this.innerNode=a('<div id="bibliobird-dock" class="clear-block"></div>').get(0);this.node=a("<div></div>").css("zIndex","101").append(this.innerNode).get(0);this.userNode=a("<div></div>").css({"float":"left","padding-left":10}).get(0);this._rebuild();this._layout=new i({node:this.node,size:35});this._layout.layout()},_rebuild:function(){var c,f,m,n=this;this.innerNode.innerHTML="";f=a('<select id="bibliobird-language-switcher"></select>').css({"float":"left",
"margin-top":5,"margin-left":5}).get(0);for(c in q){m=a("<option>"+q[c]+"</option>");m.attr("value",c);c==b.lang&&m.attr("selected","selected");a(f).append(m)}a(f).bind("change",function(){b.lang=a("option:selected",f).val();n._rebuild()});c=a('<a id="bibliobird-wial-button"></a>').css({display:"block","float":"left",background:"transparent url('"+k("sites/all/themes/bbcom_theme/images/join-btn-left.png","www")+"') left no-repeat","padding-left":11,height:27,"margin-left":10,"margin-top":2,color:"white",
"font-size":"12px","font-weight":"bold","text-decoration":"none",cursor:"pointer"}).attr({href:k("wial"),target:"_blank"}).append(a("<span></span>").css({display:"block","float":"left",background:"transparent url('"+k("sites/all/themes/bbcom_theme/images/join-btn-right.png","www")+"') right no-repeat","padding-right":14,height:27,cursor:"pointer"}).append(a("<span></span>").css({display:"block","float":"left",background:"transparent url('"+k("sites/all/themes/bbcom_theme/images/join-btn-middle.png",
"www")+"') center repeat-x","padding-top":4,height:23,cursor:"pointer"}).text(e("Words I Am Learning"))));a(this.innerNode).css({height:"100%",background:"#e5e5f9","border-top":"1px solid black","font-size":"14pt"}).append(a("<div>BiblioBird</div>").css({"float":"left",background:"#07104C","font-weight":"bold",height:"100%",color:"white","font-size":"16pt",padding:"0 10px","border-right":"1px solid white"})).append(this.userNode).append(a("<div></div>").css({"float":"right","padding-right":"10px"}).append('<label for="bibliobird-language-switcher" style="float: left">'+
e("Translate to")+": </label>").append(f).append(c));this.rebuildLinks()},rebuildLinks:function(){var c=a(this.userNode);a("#bibliobird-wial-button",this.node)[b.username?"show":"hide"]();c.html("");if(b.username){c.append(e("Hello")+", "+b.username+"!  (");c.append(a("<a></a>").html(e("not me!")).attr("href",k("logout")).click(function(){b.logout();return false}));c.append(")")}else{c.append(e("Hello")+"!  ");c.append(a("<a></a>").html(e("Login")).attr("href",k("remote/login")+(b.localRelayUrl?"?relay="+
b.localRelayUrl:"")).click(function(f){b.openEmbedWindow(f.target.href);return false}));c.append(" "+e("or")+" ");c.append(a("<a></a>").html(e("register")).attr({href:k("user/register"),target:"_blank"}));c.append(" "+e("on BiblioBird")+".")}}});if(typeof window.BiblioBird!="undefined")b=window.BiblioBird;h(b,l,true);h(b,{initialized:false,contentAreas:[],embedWindow:null,embedIframe:null,embedWindowShown:false,username:null,isRemoteIframe:false,bottomDock:null,hasContent:false,start:function(){window.self!==
window.top&&window.self.location.hash&&this._readHashOptions();a(".bibliobird-content").each(function(){b.contentAreas.push(new o(this))})},_readHashOptions:function(){var c=(""+window.self.location.hash).split("&"),f={},m,n;for(m=0;m<c.length;m++){n=c[m].split("=");f[n[0]]=n[1]}if(f["#iam"]=="bibliobird")this.isRemoteIframe=true},initialize:function(c,f){function m(){var r=(a(window).width()-400)/2,u=(a(window).height()-200)/2;if(!s){u+=a(window).scrollTop();r+=a(window).scrollLeft()}n.css({top:u,
left:r})}this.username=c;if(!this.hasContent&&f){if(!this.isRemoteIframe)this.bottomDock=new w;this.hasContent=f}if(!this.initialized){var n=a('<div class="clear-block"><div class="bibliobird-embed-titlebar"><span class="bibliobird-embed-title">BiblioBird</span> <a href="#" class="bibliobird-embed-close">close</a></div></div>');f=a('<iframe height="100%" width="100%" frameBorder="0" id="bibliobirdEmbedIframe" name="bibliobirdEmbedIframe"></iframe>').appendTo(n);n.css({width:400,height:200,position:s?
"fixed":"absolute",border:"1px solid black",background:"white",display:"none",zIndex:101}).appendTo(a("body"));a(".bibliobird-embed-close",n).click(function(){b.hideEmbedWindow();return false});a(window).resize(m);s||a(window).scroll(m);setTimeout(m,0);d.setup({layout:"popup",skipHoverEvents:true});a("body").click(function(r){b.hideEmbedWindow();return d.handleClick(r.target)});h(this,{embedWindow:n,embedIframe:f,username:c,initialized:true});this.oninit();c&&this.onlogin()}},receiveMessage:function(c){if(c.indexOf("#login-successful")==
0){c=c.split(":");if(c[1])this.username=c[1];else alert("Login failed!  Problem with cookies.  Do you use IE6?  If so, try a different browser.");this.hideEmbedWindow();this.onlogin()}},openEmbedWindow:function(c){if(this.embedWindow!==null&&!this.embedWindowShown){this.embedIframe.attr("src",c);this.embedWindow.show();this.embedWindowShown=true}},hideEmbedWindow:function(){if(this.embedWindow!==null&&this.embedWindowShown){this.embedWindow.hide();this.embedWindowShown=false;this.refreshAll()}},logout:function(){var c=
this;a.ajax({url:k("remote/logout"),dataType:"jsonp",success:function(){c.username=null;c.refreshAll();c.onlogout()}})},refreshAll:function(){a.each(this.contentAreas,function(){this.refresh()});this.bottomDock&&this.bottomDock.rebuildLinks()}});d.onLoad=function(c){c=(c.attr("data-entry")||"").split("#");var f=c[0],m=c[1];d.setBubbleLoading();a.ajax({url:k("embed-reader/lookup_entry"),dataType:"jsonp",data:{hash:f,lang:b.lang},success:function(n){d.setBubbleContent(n.content);a(".node",d.contentNode).removeClass("clear-block").removeAttr("id");
a("ul.links.inline",d.contentNode).remove();m&&a(".lingwo-sense-id-"+m,d.contentNode).addClass("selected");a("a",d.contentNode).each(function(r,u){r=u.href;var x;if(r){x=window.self.location.protocol+"//"+window.self.location.host;u.href=r.replace(x,k());u.target="_blank"}});b.onlookup()}})};h(o.prototype,{lookupContent:function(){var c=this;a.ajax({url:k("embed-reader/lookup_content"),dataType:"jsonp",data:{url:this.url},success:function(f){b.initialize(f.username,!!f.content);c.data=f;c.rebuildLinks();
if(f.content){c.node.innerHTML=f.content;d.setupHoverEvents()}}})},rebuildLinks:function(){if(b.showLinks){var c=this.links,f=this.data;c.html("");f.not_found&&c.append(a("<a></a>").html("Add to Bibliobird").attr({href:k("node/add/content?remote_url="+escape(this.url)),target:"_blank"}))}},refresh:function(){this.rebuildLinks()}});return window.BiblioBird=b});t.def("jquery",[],function(){return window.jQuery});t.def("jQuery",[],function(){return window.jQuery});t(["bibliobird/Embed"],function(a){a.start()})})();
